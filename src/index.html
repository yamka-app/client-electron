<!DOCTYPE html>
<html>
  <!--
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
  -->
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="
            default-src 'self' https://www.youtube.com/;
            style-src 'self' 'unsafe-inline' file://*; 
            img-src 'self' https://twemoji.maxcdn.com/ https://i.ytimg.com/ data:;
            script-src 'self' 'unsafe-eval' https://twemoji.maxcdn.com/;
            frame-src https://*.youtube.com https://youtube.com https://open.spotify.com;
            connect-src https://yamka.app;
            worker-src 'self' blob:">

    <title>Yamka</title>

    <link rel="stylesheet" type="text/css" href="./css/main.css">
    <link rel="stylesheet" type="text/css" href="./css/switch.css">
    <link rel="stylesheet" type="text/css" href="./css/popups.css">
    <link rel="stylesheet" type="text/css" href="./css/group_panels.css">
    <link rel="stylesheet" type="text/css" href="./css/group_invites.css">
    <link rel="stylesheet" type="text/css" href="./css/voice.css">
    <link rel="stylesheet" type="text/css" href="./css/context.css">
    <link rel="stylesheet" type="text/css" href="./css/polls.css">
    <link rel="stylesheet" type="text/css" href="./css/notif.css">
    <link rel="stylesheet" type="text/css" href="./css/account_selector.css">
    <link rel="stylesheet" type="text/css" href="./css/e2ee.css">
    <link rel="stylesheet" type="text/css" href="./css/hover_text.css">
    <link id="theme-css" rel="stylesheet" type="text/css" href="themes/dark.css">
    <link rel="stylesheet" href="../node_modules/highlight.js/styles/gruvbox-dark.css">

    <script src="../node_modules/colorthief/dist/color-thief.umd.js"></script>
    <script src="./web-voice-processor.js"></script>

    <!--JS files are generated by the TS compiler-->
    <script type="module" src="./js/esnext/protocol.s/entities.s.js"></script>
    <script type="module" src="./js/esnext/protocol.s/packets.s.js"></script>
    
    <script type="module" src="./js/esnext/renderer/renderer.js"></script>
    <script type="module" src="./js/esnext/renderer/tasty_plug.js"></script>
    <script type="module" src="./js/esnext/renderer/settings.js"></script>
    <script type="module" src="./js/esnext/renderer/util.js"></script>
    <script type="module" src="./js/esnext/renderer/context.js"></script>

    <script type="module" src="./js/esnext/renderer/dom_util/dom_util.js"></script>
    <script type="module" src="./js/esnext/renderer/dom_util/layout.js"></script>
    <script type="module" src="./js/esnext/renderer/dom_util/msg_util.js"></script>
    <script type="module" src="./js/esnext/renderer/dom_util/notif.js"></script>
    <script type="module" src="./js/esnext/renderer/dom_util/account_selector.js"></script>
  </head>

  <body>
    <div id="connecting-screen-bg" class="darken-bg">
      <div id="connecting-screen" class="flex-col">
        <span>Connecting</span>
        <div class="loading-spinner">
          <div></div>
        </div>
        <span>Problems? Check your Internet connection or</span>
        <button id="connecting-tweet">Tweet at us</button>
      </div>
    </div>

    <div id="floating-message-bg" class="darken-bg" style="display: none;">
      <div id="floating-message">
        <!--The floating message will be here-->
      </div>
    </div>

    <div id="floating-image-bg" class="darken-bg" style="display: none;">
      <!--The floating image will be here-->
    </div>

    <div id="group-delete-box-bg" class="darken-bg" style="display: none;">
      <div id="group-delete-box" class="flex-col">
        <h6>WARNING!</h6>
        <p>This action is <b>IRREVERSIBLE</b>! You can <b>NOT</b> restore a group after it has been deleted!</p>
        <button id="group-delete-revert"  class="apply-button">I CHANGED MY MIND</button>
        <p>Please enter the name of the group you want to delete (<b><spam id="group-delete-name"></spam></b>) to confirm this action.</p>
        <input id="group-delete-name-input"/>
        <button id="group-delete-confirm" class="danger-button">DELETE THIS GROUP</button>
      </div>
    </div>

    <div id="password-chg-box-bg" class="darken-bg" style="display: none;">
      <div id="password-chg-box" class="flex-col">
        <input id="password-chg-current" placeholder="CURRENT PASSWORD" type="password"/>
        <input id="password-chg-mfa" placeholder="2FA CODE"/>
        <input id="password-chg-new" placeholder="NEW PASSWORD" type="password"/>
        <button id="password-chg-ok" class="apply-button">CHANGE PASSWORD</button>
        <button id="password-chg-cancel">CANCEL</button>
      </div>
    </div>

    <div id="profile-bg" class="darken-bg" style="display: none;">
      <div id="profile">
        <div id="profile-topbar" class="flex-row">
          <img id="profile-avatar" class="user-avatar-huge"/>
          <div class="flex-col">
            <div id="profile-nickname-container" class="flex-row">
              <span id="profile-nickname" class="user-nickname">nickname</span>
              <span id="profile-tag" class="user-tag">#11111</span>
              <span id="profile-badges" class="flex-row"></span>
            </div>
          </div>
        </div>
        <div class="flex-row">
          <div id="profile-groups-container">
            <h6>MUTUAL GROUPS</h6>
            <div id="profile-groups"></div>
          </div>
          <div id="profile-friends-container">
            <h6>MUTUAL FRIENDS</h6>
            <div id="profile-friends"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="group-create-box-bg" class="darken-bg" style="display: none;">
      <div id="group-create-box" class="flex-col">
        <span>CREATE A GROUP</span>
        <input id="group-create-name" class="fill-width" placeholder="Name"/>
        <button id="group-create-ok" class="accent-button fill-width">CREATE</button>

        <span>JOIN A GROUP</span>
        <input id="group-join-code" class="fill-width" placeholder="Invite code"/>
        <button id="group-join-ok" class="fill-width">JOIN</button>
      </div>
    </div>

    <div id="update-popup" class="flex-col" style="display: none;">
      <span style="font-size: 15px;">NEWER VERSION AVAILABLE</span>
      <span id="update-popup-text">OLD â†’ NEW</span>

      <button id="update-popup-upd" class="accent-button fill-width" style="margin-top: 20px;">UPDATE</button>
      <button id="update-popup-ign" class="              fill-width" style="margin-top: 20px;">IGNORE</button>
    </div>

    <div id="message-history-bg" class="popup-bg" style="display: none;">
      <div id="message-history" class="flex-col">
        <!-- Message states go here -->
      </div>
    </div>

    <div id="notification-list">

    </div>

    <table id="capital-layout">
      <tr style="height: fit-content"><td style="padding: 0; vertical-align: top;">
        <div id="title-bar">
          <div id="title-text">Yamka - Alpha</div>
          <div id="title-status"></div>

          <div id="title-bar-buttons">
            <img src="icons/dark.png" style="margin-bottom: 1px;"/>
            <label class="switch" style="margin-left: 0; margin-top: 2px;">
              <input id="theme-switch" type="checkbox"/>
              <span class="slider round"></span>
            </label>
            <img src="icons/light.png" style="margin-right: 5px; margin-bottom: 1px;"/>

            <button class="title-bar-button" id="minimize-button"><img src="icons/minimize.png"/></button>
            <button class="title-bar-button" id="maximize-button"><img src="icons/maximize.png"/></button>
            <button class="title-bar-button" id="close-button"><img src="icons/close.png"/></button>
          </div>
        </div>
      </td></tr>

      <tr id="email-unconfirmed-bar-container" style="height: fit-content; display: none;"><td style="padding: 0; vertical-align: top;">
        <div id="email-unconfirmed-bar">
          <span>Your email address is unconfirmed. Please check your inbox for instructions</span>
        </div>
      </td></tr>

      <tr style="display: none;" id="main-layout-container"><td style="padding: 0">
        <div id="user-settings-bg" class="darken-bg" style="display: none;">
          <div id="user-settings">
            <div id="user-settings-sidebar">
              <button id="user-settings-exit" class="menu-exit"></button>

              <input id= "user-settings-section-profile-sel" type="radio" name="user-settings-sections" class="settings-radio" checked="checked"/>
              <label for="user-settings-section-profile-sel" class="settings-section-sel">PROFILE</label>

              <input id= "user-settings-section-notifications-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-notifications-sel" class="settings-section-sel">NOTIFICATIONS</label>

              <input id= "user-settings-section-content-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-content-sel" class="settings-section-sel">CONTENT</label>

              <input id= "user-settings-section-appearance-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-appearance-sel" class="settings-section-sel">APPEARANCE</label>

              <input id= "user-settings-section-audio-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-audio-sel" class="settings-section-sel">AUDIO</label>

              <input id= "user-settings-section-about-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-about-sel" class="settings-section-sel">ABOUT</label>

              <input id= "user-settings-section-developers-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-developers-sel" class="settings-section-sel">DEVELOPERS</label>

              <input id= "user-settings-section-logout-sel" type="radio" name="user-settings-sections" class="settings-radio"/>
              <label for="user-settings-section-logout-sel" class="settings-section-sel" style="color: var(--red-color);">LOG OUT</label>
            </div>

            <div id="user-settings-section-profile" class="settings-section user-settings-section">
              <div class="settings-subsection">
                <span class="settings-subsection-title">PROFILE</span>
                <div class="flex-row">
                  <div id="self-avatar-change-container">
                    <img id="self-avatar-huge" class="user-avatar-huge"/>
                    <div id="self-avatar-change">CHANGE</div>
                  </div>
                  <div id="self-profile-settings-inputs">
                    <div class="self-profile-setting-input-container">
                      USERNAME
                      <div>
                        <input id="self-name-change"/>
                        <abbr title="You can't change your tag"><span id="self-tag-settings" class="user-tag"></abbr></label>
                      </div>
                    </div>

                    <div class="self-profile-setting-input-container">
                      STATUS
                      <span id="self-status-switch" class="radio-switch">
                        <span>
                          <img src="./icons/online.png"/>
                          <input id= "self-status-online" type="radio" name="self-status-sel" checked="checked"/>
                          <label for="self-status-online" class="status-sel">ONLINE</label>
                        </span>
                        <span >
                          <img src="./icons/offline.png"/>
                          <input id= "self-status-offline" type="radio" name="self-status-sel" class="hidden-radio"/>
                          <label for="self-status-offline" class="status-sel">OFFLINE</label>
                        </span>
                        <span>
                          <img src="./icons/idle.png"/>
                          <input id= "self-status-idle" type="radio" name="self-status-sel" class="hidden-radio"/>
                          <label for="self-status-idle" class="status-sel">IDLE</label>
                        </span>
                        <span>
                          <img src="./icons/focus.png"/>
                          <input id= "self-status-focus" type="radio" name="self-status-sel" class="hidden-radio"/>
                          <label for="self-status-focus" class="status-sel">FOCUSED</label>
                        </span>
                        <span>
                          <img src="./icons/dnd.png"/>
                          <input id= "self-status-dnd" type="radio" name="self-status-sel" class="hidden-radio"/>
                          <label for="self-status-dnd" class="status-sel">DO NOT DISTURB</label>
                        </span>
                      </span>
                      <span id="self-status-explainer">Status explainer</span>

                      <div class="self-profile-setting-input-container">
                        STATUS TEXT
                        <input id="self-status-text-change"/>
                      </div>

                      <div class="self-profile-setting-input-container">
                        TIP: PRESS ENTER IN INPUT FIELDS TO SAVE CHANGES
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="settings-subsection">
                <span class="settings-subsection-title">DEVICES AND CONNECTED APPS</span>
                <div id="agent-list" class="flex-col">
                </div>
              </div>

              <div class="settings-subsection">
                <span class="settings-subsection-title">AUTHENTICATION</span>
                <div class="self-profile-setting-input-container">
                  E-MAIL ADDRESS
                  <input id="self-email-change"/>
                </div>
                <div id="email-conf-cont" class="self-profile-setting-input-container">
                  E-MAIL CONFIRMATION CODE
                  <input id="self-email-confirm"/>
                </div>
                <div class="self-profile-setting-input-container">
                  <span class="flex-row">
                    2FA IS
                    <span id="self-mfa-enable-status">DISABLED</span>
                  </span>
                  <button id="self-mfa-toggle-button" class="danger-button">ENABLE 2FA</button>
                </div>
                <div class="self-profile-setting-input-container">
                  <button id="self-password-change-button" class="danger-button">CHANGE PASSWORD</button>
                </div>
              </div>
            </div>

            <div id="user-settings-section-about" class="settings-section user-settings-section" style="display: none;">
              <img id="about-logo" src="logo.png"><br>
              <span class="flex-row">Client version&nbsp;<span id="client-version"></span></span>
              <p>ABOUT</p>
              Yamka is a messaging app that does not track you, does not have ads, does
              not ban people or groups and provides excellent customization.
              All official clients and the back end are free software distributed under the MPL license.
              <br>
              <button id="view-on-github" class="accent-button">View code on GitHub</button>
              <button id="donate" class="accent-button">Donate money</button>
              <br>

              <p>TECHNOLOGIES</p>
              <span>Linux and Windows clients: Electron, TypeScript</span>
              <span>Back end: Erlang/OTP, Apache Cassandra, GlusterFS</span>
              <span>Website: nginx</span>

              <p>CREDITS</p>
              <span>End-to-End Encryption scheme invented by <a href="https://www.signal.org/docs">Signal</a></span>
              <span>Icons by <a href="https://icons8.com">Icons8</a></span>
              <span><a href="https://twemoji.twitter.com">Twemoji</a> by Twitter</span>
              <span>Montserrat by the Montserrat Project authors</span>
              <span>Noto Sans by Google</span>
              <span><a href="https://www.jetbrains.com/lp/mono">JetBrains Mono</a> by JetBrains</span><br>
              Thanks to:<br>
              <span><a href="https://github.com/hetyh">hetyh</a> and LukasTM for suporting the project financially</span>
              <span><a href="https://github.com/FlyingPotato-131">FlyingPotato_131</a>,
                  <a href="https://github.com/hetyh">hetyh</a>
                  and <a href="https://github.com/NOTNOTsergey">pySAr5</a> for testing</span>

              <p>CREATED BY</p>
              <span><a href="https://github.com/portasynthinca3">portasynthinca3</a></span>
            </div>

            <div id="user-settings-section-notifications" class="settings-section user-settings-section" style="display: none;">
              <div class="settings-subsection">
                <span class="settings-subsection-title">NOTIFICATIONS</span>
                <div class="self-profile-setting-input-container">
                  <div class="setting-switch">
                    <label class="switch" style="margin-left: 0; margin-top: 2px;">
                      <input id="enable-notifications" type="checkbox"/>
                      <span class="slider round"></span>
                    </label>
                    <span>RECEIVE NOTIFICATIONS</span>
                  </div>
                  <div class="setting-switch">
                    <label class="switch" style="margin-left: 0; margin-top: 2px;">
                      <input id="send-typing" type="checkbox"/>
                      <span class="slider round"></span>
                    </label>
                    <span>TELL OTHERS I'M TYPING</span>
                  </div>
                </div>
              </div>
            </div>

            <div id="user-settings-section-audio" class="settings-section user-settings-section" style="display: none;">
              <div class="settings-subsection">
                <span class="settings-subsection-title">AUDIO</span>
                <div class="self-profile-setting-input-container">
                  <div class="self-profile-setting-input-container">
                    MICROPHONE VOLUME
                    <input id="mic-gain" type="range" min="0" max="2" step="0.001" class="trackbar">
                    <progress id="mic-vol-val" value="0" max="1" class="fill-width"></progress>
                  </div>
                  <div class="self-profile-setting-input-container">
                    MICROPHONE ACTIVATION THRESHOLD
                    <input id="mic-thres" type="range" min="0" max="1" step="0.001" class="trackbar">
                  </div>
                </div>
              </div>
            </div>

            <div id="user-settings-section-content" class="settings-section user-settings-section" style="display: none;">
              <div class="settings-subsection">
                <span class="settings-subsection-title">CONTENT</span>
                <div class="self-profile-setting-input-container">
                  <div class="setting-switch">
                    <label class="switch" style="margin-left: 0; margin-top: 2px;">
                      <input id="preview-yt" type="checkbox"/>
                      <span class="slider round"></span>
                    </label>
                    <span>PREVIEW SUPPORTED SERVICES' CONTENT (e.g. YouTube videos)</span>
                  </div>
                  <div class="setting-switch">
                    <label class="switch" style="margin-left: 0; margin-top: 2px;">
                      <input id="blur-unfocused" type="checkbox"/>
                      <span class="slider round"></span>
                    </label>
                    <span>BLUR THE APP WHEN UNFOCUSED</span>
                  </div>
                </div>
              </div>
            </div>

            <div id="user-settings-section-appearance" class="settings-section user-settings-section" style="display: none;">
              <div class="settings-subsection">
                <span class="settings-subsection-title">APPEARANCE</span>
                <div class="self-profile-setting-input-container">
                  ACCENT COLOR
                  <input id="accent-color-change" type="color"/>
                </div>
                <div class="self-profile-setting-input-container">
                  THEME
                  <span>
                    <span id="theme-name">Name</span>
                    <spam id="theme-name-sep"> by </spam>
                    <span id="theme-author">Author</span>
                  </span>
                  <button id="theme-change" class="apply-button">LOAD CUSTOM THEME</button>
                  <br>
                  <a href="https://github.com/yamka-app/client-electron/wiki/Writing-custom-themes">Theming docs for developers</a>
                </div>
              </div>
            </div>

            <div id="user-settings-section-developers" class="settings-section user-settings-section" style="display: none;">
              <div class="settings-subsection">
                <span class="settings-subsection-title">DEVELOPERS</span>
                <div class="self-profile-setting-input-container">
                  <div class="setting-switch">
                    <label class="switch" style="margin-left: 0; margin-top: 2px;">
                      <input id="en-sslkeylog" type="checkbox"/>
                      <span class="slider round"></span>
                    </label>
                    <span>ENABLE TLS KEY LOGGING (read docs, major security hole!)</span>
                  </div>
                  <!--
                  <div class="self-profile-setting-input-container">
                    <input id="create-bot-name" placeholder="Bot name"/>
                    <button id="create-bot" class="apply-button">CREATE A BOT</button>
                  </div>
                  <div class="self-profile-setting-input-container">
                    <span>YOUR BOTS: </span><span id="owned-bot-list"></span>
                  </div>
                  -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="group-settings-bg" class="darken-bg" style="display: none;">
          <div id="group-settings">
            <div id="group-settings-sidebar">
              <button id="group-settings-exit" class="menu-exit"></button>

              <input id= "group-settings-section-general-sel" type="radio" name="group-settings-sections" class="settings-radio" checked="checked"/>
              <label for="group-settings-section-general-sel" class="settings-section-sel">GENERAL</label>

              <input id= "group-settings-section-roles-sel" type="radio" name="group-settings-sections" class="settings-radio" checked="checked"/>
              <label for="group-settings-section-roles-sel" class="settings-section-sel">ROLES</label>

              <input id= "group-settings-section-channels-sel" type="radio" name="group-settings-sections" class="settings-radio" checked="checked"/>
              <label for="group-settings-section-channels-sel" class="settings-section-sel">CHANNELS</label>

              <input id= "group-settings-section-invites-sel" type="radio" name="group-settings-sections" class="settings-radio" checked="checked"/>
              <label for="group-settings-section-invites-sel" class="settings-section-sel">INVITES</label>

              <input id= "group-settings-section-delete-sel" type="radio" name="group-settings-sections" class="settings-radio"/>
              <label for="group-settings-section-delete-sel" class="settings-section-sel" style="color: var(--red-color);">DELETE GROUP</label>
            </div>

            <div id="group-settings-section-general" class="settings-section group-settings-section">
              <div id="group-general-settings" class="settings-subsection">
                <span class="settings-subsection-title">GENERAL</span>
                <div class="flex-row">
                  <div id="group-icon-change-container">
                    <img id="group-icon-huge" class="group-icon-huge"/>
                    <div id="group-icon-change">CHANGE</div>
                  </div>
                  <div id="group-settings-inputs">
                    <div class="group-setting-input-container">
                      NAME
                      <input id="group-name-change"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="group-settings-section-channels" class="settings-section group-settings-section">
              <div class="settings-subsection">
                <span class="settings-subsection-title">CHANNELS</span>
                <div class="flex-row">
                  <div class="flex-col">
                    <div id="group-settings-channel-list" class="flex-col">
                      <!--Channels reside here-->
                    </div>
                    <button id="channel-add-button" class="fill-width">+</button>
                  </div>
                  <div id="group-settings-channel-settings" class="flex-col">
                    <div class="group-setting-input-container">
                      NAME
                      <input id="channel-name-change"/>
                    </div>
                    <div class="group-setting-input-container">
                      VOICE
                      <label class="switch" style="margin-left: 0; margin-top: 2px;">
                        <input id="channel-voice-change" type="checkbox">
                        <span class="slider round"></span>
                      </label>
                    </div>
                    <button id="channel-remove-button" class="danger-button">DELETE CHANNEL</button>
                  </div>
                </div>
              </div>
            </div>

            <div id="group-settings-section-invites" class="settings-section group-settings-section">
              <div class="settings-subsection">
                <span class="settings-subsection-title">INVITES</span>
                <div class="flex-col">
                  <div id="group-settings-invite-list" class="flex-col">
                    <!--Invites reside here-->
                  </div>
                  <button id="invite-create-button" class="apply-button">CREATE INVITE</button>
                  <input id="invite-bot-id" placeholder="Bot ID"></input>
                  <button id="invite-bot-button" class="apply-button">INVITE BOT</button>
                </div>
              </div>
            </div>

            <div id="group-settings-section-roles" class="settings-section group-settings-section">
              <div class="settings-subsection">
                <span class="settings-subsection-title">ROLES</span>
                <div class="flex-row">
                  <div class="flex-col">
                    <button id="role-add-button" class="fill-width">+</button>
                    <div id="group-settings-role-list" class="flex-col">
                      <!--Roles reside here-->
                    </div>
                  </div>
                  <div id="group-settings-role-settings" class="flex-col">
                    <div class="group-setting-input-container">
                      NAME
                      <input id="role-name-change"/>
                    </div>
                    <div class="group-setting-input-container">
                      COLOR
                      <input id="role-color-change" type="color"/>
                    </div>
                    <button id="role-remove-button" class="danger-button">DELETE ROLE</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="mfa-qr-banner-bg" class="darken-bg" style="display: none;">
          <div id="mfa-qr-banner">
            <span style="margin-bottom: 20px;">2FA QR CODE</span>
            <div id="mfa-qr-placeholder" style="margin-bottom: 20px;"></div>
            <span>Scan this code in your code-generating app (i.e. Authy) on your phone</span>
            <span>Or enter/copy this secret manually if using a different means of token generation:
                <span id="mfa-code-manual"></span></span>
            <button id="mfa-qr-ok" class="accent-button fill-width">OK</button>
          </div>
        </div>

        <table id="main-layout"><tbody><tr>
          <td id="channel-list-sidebar">
            <div id="channel-list-container" class="flex-col">
              <div id="channel-list-header" class="flex-row">
                <button id="group-leave" class="icon-button cg-button"><img src="icons/leave.png"/></button>
                <span id="group-name"></span>
              </div>
              <div class="scroll-area">
                <div id="channel-list" class="flex-col">
                  <!--Channels reside here-->
                </div>
              </div>
            </div>
          </td>

          <td id="central-field">
            <div id="central-layout" class="flex-col">
              <div id="group-panel-area" class="scroll-area">
                <!-- Group panels reside here -->
                <div class="group-action-panel" id="group-create-join-panel">
                  <img src="icons/group_add.png" class="cg-img">
                  <span>Create or join a group</span>
                </div>
              </div>

              <div id="message-container-area" class="flex-col">
                <div id="message-area-title">
                  <div class="flex-row">
                    <button id="message-area-leave" class="icon-button cg-button"><img src="icons/leave.png"></button>
                    <button id="message-area-e2ee" class="icon-button"><img src="icons/e2ee.png"></button>
                    <button id="message-area-voice" class="icon-button cg-button"><img src="icons/voice.png"></button>
                    <abbr id="voice-encoder-stats"><span id="voice-status"></span></abbr>
                    <button id="message-area-voice-disconnect" class="icon-button cg-button" style="display:none">
                      <img src="icons/disconnect.png"></button>
                  </div>
                  <div id="voice-members">
                  </div>
                </div>
                <div id="message-scroll-area" class="scroll-area">
                  <div id="message-area" class="flex-col">
                    <!-- Messages reside here -->
                    <div id="message-area-header">
                      <p>You've reached the start of this channel</p>
                    </div>
                  </div>
                </div>
                
                <div id="message-input-popup" class="flex-row">
                  <div id="message-input-container" class="input-container">
                    <!-- Message sections reside here -->
                    <div id="message-section-add-btns" class="flex-row">
                      <button id="message-text-section-button"  class="icon-button cg-button"><img src="icons/add_text.png"></button>
                      <button id="message-file-section-button"  class="icon-button cg-button"><img src="icons/add_file.png"></button>
                      <button id="message-code-section-button"  class="icon-button cg-button"><img src="icons/add_code.png"></button>
                      <button id="message-quote-section-button" class="icon-button cg-button"><img src="icons/add_quote.png"></button>
                      <button id="message-poll-section-button"  class="icon-button cg-button"><img src="icons/add_poll.png"></button>
                      <span id="message-editing"></span>
                      <span id="channel-typing"></span>
                      <div id="typing-dots" class="flex-row" style="display: none;">
                        <div id="typing-dot-1"></div>
                        <div id="typing-dot-2"></div>
                        <div id="typing-dot-3"></div>
                      </div>
                      <button id="message-send-button" class="icon-button cg-button"><img src="icons/send.png"></button>
                    </div>
                    <div id="mention-list"></div>
                  </div>
                </div>

                <div id="e2ee-placeholder" style="display: none;">
                  This conversation is getting set up to use ecryption. This user needs to get online before you can start chatting
                </div>
              </div>
            </div>
          </td>

          <td id="member-list-sidebar"><table style="border: none; border-spacing: 0; height: 100%; width: 100%">
            <tr style="height: fit-content;"><td id="member-list-friend-header" class="flex-row">
              CONTACTS
              <button id="friends-all"         class="icon-button cg-button"><img src="icons/friend.png"/></button>
              <button id="friends-online"      class="icon-button cg-button"><img src="icons/friend_online.png"/></button>
              <button id="friends-pending-in"  class="icon-button cg-button">
                <img src="icons/friend_pending_in.png"/>
                <div id="pin-cnt-container" class="bubble"><span id="pending-in-count">0</span></div>
              </button>
              <button id="friends-pending-out" class="icon-button cg-button"><img src="icons/friend_pending_out.png"/></button>
              <button id="friends-blocked"     class="icon-button cg-button"><img src="icons/ban.png"/></button>

              <button id="friend-add"          class="icon-button cg-button"><img src="icons/friend_add.png"/></button>
            </td></tr>

            <tr style="height: fit-content;"><td class="input-container" id="user-search-bar" style="display: none;">
              <input id="user-search-input" class="fill-width" placeholder="username#00000"/>
              <button id="friend-add-commit" class="apply-button fill-width">ADD FRIEND</button>
            </td></tr>

            <tr style="height: fit-content;"><td id="member-list-friend-type">
              ALL FRIENDS
            </td></tr>

            <tr style="height: fit-content;"><td id="member-list-group-header" style="display: none;">
              GROUP MEMBERS
            </td></tr>

            <tr><td id="member-list-bar" class="flex-col">
              <!-- All members reside here -->
            </td></tr>

            <tr><td id="user-info-bar">
              <div class="user-avatar-container">
                <img id="self-avatar" class="user-avatar"/>
                <img id="self-status" class="user-online"/>
              </div>

              <span id="self-status-text" class="user-status">status text</span>
              <div class="flex-row user-nickname-container">
                <span id="self-nickname" class="user-nickname">loading</span>
                <span id="self-tag" class="user-tag">#00000</span>
              </div>
            </td></tr>
          </table></td>
        </tr></tbody></table>
      </td></tr>

      <div id="floating-box-bg" class="darken-bg" style="display: none;">
        <div id="floating-box" class="flex-col">
          <span id="floating-box-header" style="font-size: 15px;">TITLE</span>
          <span id="floating-box-text">Text</span>
  
          <button id="floating-box-upd" class="accent-button fill-width" style="margin-top: 20px;">UPDATE</button>
          <button id="floating-box-ok"  class="              fill-width" style="margin-top: 20px;">OK</button>
        </div>
      </div>

      <tr style="height: fit-content"><td style="padding: 0"><div id="user-select" style="display: show;" class="flex-col">
        
      </div></td></tr>

      <tr style="height: fit-content"><td style="padding: 0"><div id="login-form" style="display: none;" class="flex-col">
        <span class="form-head">E-MAIL</span>
        <span class="input-container"><input id="login-email" style="margin-bottom: 10px;" class="fill-width"/></span>
  
        <span class="form-head">PASSWORD</span>
        <span class="input-container" class="fill-width"><input id="login-password" type="password" class="fill-width"/></span>
  
        <button id="login-button" class="accent-button fill-width">LOG IN</button>
        <button id="login-back-button" class="fill-width">BACK</button>
      </div></td></tr>

      <tr style="height: fit-content"><td style="padding: 0"><div id="mfa-form" style="display: none;">
        2FA CODE
        <br>
        <span class="input-container"><input id="login-mfa-code" style="margin-bottom: 10px;" class="fill-width"/></span>
        <br>
  
        <button id="mfa-login-button" class="accent-button fill-width">LOG IN</button>
      </div></td></tr>

      <tr style="height: fit-content"><td style="padding: 0"><div id="signup-form" style="display: none;">
        <span class="form-head">USERNAME</span>
        <label id="username-required" style="color: #aa3a3a; display: none;">REQUIRED</label>
        <br>
        <span class="input-container"><input id="signup-username" style="margin-bottom: 10px;" class="fill-width"/></span>
        <br>
  
        <span class="form-head">E-MAIL</span>
        <label id="email-required" style="color: #aa3a3a; display: none;">INVALID</label>
        <br>
        <span class="input-container"><input id="signup-email" style="margin-bottom: 10px;" class="fill-width"/></span>
        <br>
  
        <span class="form-head">PASSWORD</span>
        <label id="password-strength-text" style="-webkit-background-clip: text;"></label>
        <br>
        <progress id="password-strength-meter" value="0" max="3" class="fill-width password-weak"></progress>
        <br>
        <span class="input-container"><input id="signup-password" type="password" class="fill-width"/></span>
        <br>

        <!--<div class="h-captcha" data-sitekey="ab9931fb-9173-4aac-9f25-86f53f709396" data-theme="dark" data-callback="captchaSolved"></div>-->
  
        <button id="signup-button" class="accent-button fill-width">SIGN UP</button>
        <button id="signup-back-button" class="fill-width">BACK</button>
      </div></td></tr>
      
    </table>
  </body>
</html>
